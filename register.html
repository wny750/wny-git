<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>register</title>
    <link rel="stylesheet" href="css/register.css">
    <link rel="stylesheet" href="css/public.css">
    <link rel="stylesheet" href="css/baobao.css">
</head>
<body>
    <header class="margin">
        <div class="left"><a href="index.html"><img src="http://www.bagsnet.com/images/default/20111208/7690a92fa291ff12.jpg" alt=""></a></div>
        <div class="right">
            <div class="top">
                <a href="index.html"><img src="http://www.bagsnet.com/themes/mbaobao/images/t11.gif" alt=""></a>
            </div>
            <div class="bottom">
                <div class="bt1">
                    <b class="txt1"><a href="login.html">登录</a></b>
                    <b class="txt2">欢迎<span class="dddd"></span>登录,<em id="exit">退出</em></b>
                    <a href="##">会员中心</a>
                    <a href="##">设为首页</a>
                    <a href="##">收藏</a>
                    <a href="##">帮助</a>
                </div>
                <div class="bt2">
                    <a href="car.html">我的购物车<b>(0)</b></a>
                </div>
            </div>
        </div>
    </header>
    <nav>
        <div class="margin">
            <ul>
                <li><a href="index.html">首页</a></li>
                <li><a href="">女包</a></li>
                <li><a href="">男包</a></li>
                <li><a href="">钱包带夹</a></li>
                <li><a href="">背包</a></li>
                <li><a href="">拉杆箱</a></li>
                <li><a href="">更多</a></li>
                <li><a href="">活动</a></li>
            </ul>
            <form action="">
                <input type="text" class="txt" value="输入货号或关键词">
                <span class="sub"></span>
            </form>
        </div>
    </nav>
<section id="register">
    <div class="margin">
        <div class="left">
            <div class="box">
                <a href="#"><img src="http://www.bagsnet.com/ad/nanbao659.jpg" alt=""></a>
                <a href="#"><img src="http://www.bagsnet.com/ad/qianbao659.jpg" alt=""></a>
                <a href="#"><img src="http://www.bagsnet.com/ad/beibao659.jpg" alt=""></a>
                <a href="#"><img src="http://www.bagsnet.com/ad/nvbao659.jpg" alt=""></a>
            </div>
            <div class="btn">
                <input type="text" value="<<<" id="left">
                <input type="text" value=">>>" id="right">
            </div>
            <ul>
                <li><a href="##">韩版手提斜挎包</a></li>
                <li><a href="##">梦特娇时尚女士皮夹</a></li>
                <li><a href="##">威豪旅行背包</a></li>
                <li><a href="##">真皮牛皮女包</a></li>
            </ul>
        </div>
        <form action="" class="form">    
            <p class="register-header"> <a href="#">普通账号注册</a> <span>|</span> <a href="#">手机号码注册</a> <span>|</span><a href="#">邮箱注册</a> </p>
            <input type="tel" class="tel" placeholder="输入账号" name="user" required maxlength="10" minlength="5">
            <input type="password" class="password" placeholder="密码:请输入6~20字符,需同时包含英文和数字" name="pass" required id="p" minlength="5"> 
            <input type="password" class="password1" placeholder="再次输入密码" name="pass2" required equalTo="#p">
            <div class="zifu">
                <input type="text" placeholder="请输入图片字符">    
            </div>
            <div class="youxiang">
                <input type="text" placeholder="邮箱验证码">
                <input type="button" value="获取验证码" class="te">
            </div>
            <input type="date" class="date" placeholder="请选择生日">
            <span class="te1"></span>
            <input type="button" class="submit" value="注册">    
        </form>
    </div>
</section>
<footer>
        <div class="margin">
            <div class="box1">
                <div class="top">139-2957-1525</div>
                <div class="bottom">留言板<a href="">点击进入</a></div>
            </div>
            <div class="box2 te">
                <h3><a href="">新手上路</a></h3>
                <ul>
                    <li><a href="">注册新用户</a></li>
                    <li><a href="">网购流程</a></li>
                    <li><a href="">会员等级服务</a></li>
                </ul>
            </div>
            <div class="box3 te">
                <h3><a href="">如何付款/退款</a></h3>
                <ul>
                    <li><a href="">支付方式</a></li>
                    <li><a href="">如何办理退款</a></li>
                </ul>
            </div>
            <div class="box4 te">
                <h3><a href="">配送方式</a></h3>
                <ul>
                    <li><a href="">配送政策</a></li>
                    <li><a href="">运费说明</a></li>
                    <li><a href="">配送查询</a></li>
                </ul>
            </div>
            <div class="box5 te">
                <h3><a href="">售后服务</a></h3>
                <ul>
                    <li><a href="">退换货政策</a></li>
                    <li><a href="">如何办理退换货</a></li>
                    <li><a href="">投诉建议</a></li>
                </ul>
            </div>
            <div class="box6 te">
                <h3><a href="">新手上路</a></h3>
            </div>
            <div class="bottom"><a href=""><img src="http://www.bagsnet.com/themes/mbaobao/images/g1.gif" alt=""></a></div>
        </div>
    </footer>
    <section id="footer" class="margin">
        <div class="top">
            <img src="http://china.bagsnet.com/newimg/xxmm-beian.gif" alt="">
            <img src="http://china.bagsnet.com/newimg/xxmm-jubao.gif" alt="">
            <img src="http://china.bagsnet.com/newimg/xxmm-xieh.gif" alt="">
        </div>
        <p>2003～2019 包包网 | BagsNet   All rights reserved</p>
        <a href="">Powered by <b style="color:#5c719e">Shop</b><b style="color:#f39000">Ex</b></a><span> v4.8.5</span>
        <a href="">粤ICP 05015913</a>
    </section>
</body>
<script src="js/jquery.js"></script>
<script src="js/jquery.banner.1.1.js"></script>
<script src="js/jquery.validate.js"></script>
<script src="js/jquery.validate.messages_zh.js"></script>
<script src="js/public.js"></script>
<script>
    
$("#register .left").banner({
    items:$(".left").children(".box").children("a"),
    left:$(".left").find("#left"),
    right:$(".left").find("#right")
})
// console.log($("#register .youxiang"))
$("#register .register-header a").eq(0).click(function(){
    
    $("#register .tel").attr("placeholder","输入账号");
    $("#register .youxiang").css("display","none") ;
})
$("#register .register-header a").eq(1).click(function(){
    
    $("#register .tel").attr("placeholder","输入手机号码");
    $("#register .youxiang").css("display","block") ;
    $("#register .youxiang input").eq(0).attr("placeholder","输入手机验证码");
})
$("#register .register-header a").eq(2).click(function(){
    
    $("#register .tel").attr("placeholder","输入邮箱号码");
    $("#register .youxiang").css("display","block") ;
    $("#register .youxiang input").eq(0).attr("placeholder","输入邮箱验证码");
})
class Register{
        constructor(){
            this.user = document.querySelector(".tel");
            this.pass = document.querySelector(".password");
            this.btn = document.querySelector(".submit");
            this.span = document.querySelector(".te1");
            this.init();
            this.getData();
            $(".form").validate()
            console.log($(".form").validate())
        }
        init(){
            var that = this;
            this.btn.onclick = function(){
                that.setData()
            }
        }
        getData(){
            this.abc = localStorage.getItem("abc");
            // 读取localStorage，如果有就解析成数组，如果没有就给一个空数组，方便操作
            if(this.abc == null){
                this.abc = [];
            }else{
                this.abc = JSON.parse(this.abc)
            }
        }
        setData(){
            
            $(".form").validate();
            if(this.abc.length == 0){
                // 第一次注册
                this.abc.push({
                    user:this.user.value,
                    pass:this.pass.value,
                    onoff:1
                })
                

                this.span.innerHTML = "注册成功 ,3s后自动跳转";
                localStorage.setItem("abc",JSON.stringify(this.abc));
                var timer = setTimeout(()=>{
                        location.href = "index.html";
                        },3000)
                    return;
            }else{
                // 如果执行了，表示没重名，那就再增加一个
                for(var i=0;i<this.abc.length;i++){
                        // this.abc[i].onoff=0;
                    if(this.abc[i].user !== this.user.value){
                        this.abc.push({
                            user:this.user.value,
                            pass:this.pass.value,
                            onoff:1
                        })
                        this.span.innerHTML = "注册成功 ,3s后自动跳转";
                        localStorage.setItem("abc",JSON.stringify(this.abc));
                        setTimeout(()=>{
                            location.href = "index.html";
                            },3000)
                        return;
                    }
                }
                
                        
                // 不是第一次注册，如果不是第一次注册，需要判断这次注册的和之前注册的是否重名，如果重名，不执行
                this.span.innerHTML = "重名了";
            }
            // setTimeout(()=>{
            //             location.href = "index.html";
            //         },3000)
        }
    }
    
    new Register;
</script>
</html>